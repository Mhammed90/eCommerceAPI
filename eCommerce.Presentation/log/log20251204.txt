2025-12-04 11:56:01.323 +02:00 [INF] Application is building..................
2025-12-04 11:56:02.788 +02:00 [INF] User profile is available. Using 'C:\Users\Mohamed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-04 11:56:03.410 +02:00 [INF] Application is running..................
2025-12-04 11:56:04.622 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-04 11:56:04.623 +02:00 [INF] Hosting environment: Development
2025-12-04 11:56:04.623 +02:00 [INF] Content root path: C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Presentation
2025-12-04 11:56:05.125 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/swagger - null null
2025-12-04 11:56:05.428 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/swagger/index.html - null null
2025-12-04 11:56:05.491 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/swagger - 301 null null 304.1172ms
2025-12-04 11:56:05.808 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/swagger/index.html - 200 null text/html;charset=utf-8 380.0936ms
2025-12-04 11:56:06.479 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/swagger/v1/swagger.json - null null
2025-12-04 11:56:07.043 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 564.3407ms
2025-12-04 11:57:01.990 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/api/Payment/PaymentMethods - null null
2025-12-04 11:57:02.157 +02:00 [INF] Executing endpoint 'eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods (eCommerce.Presentation)'
2025-12-04 11:57:02.184 +02:00 [INF] Route matched with {action = "GetPaymentMethods", controller = "Payment", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[eCommerce.Application.DTOs.Cart.GetPaymentMethod]]] GetPaymentMethods() on controller eCommerce.Presentation.Controller.PaymentController (eCommerce.Presentation).
2025-12-04 11:57:02.196 +02:00 [INF] Executed action eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods (eCommerce.Presentation) in 8.2268ms
2025-12-04 11:57:02.198 +02:00 [INF] Executed endpoint 'eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods (eCommerce.Presentation)'
2025-12-04 11:57:02.476 +02:00 [ERR] UnKnown exception
System.InvalidOperationException: Unable to resolve service for type 'eCommerce.Application.Services.Interfaces.Cart.IPaymentMethodService' while attempting to activate 'eCommerce.Presentation.Controller.PaymentController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean hasDefaultValue, Object key)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at eCommerce.Infrastructure.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Infrastructure\Middleware\ExceptionHandlingMiddleware.cs:line 25
2025-12-04 11:57:02.577 +02:00 [ERR] HTTP GET /api/Payment/PaymentMethods responded 500 in 571.6615 ms
2025-12-04 11:57:02.578 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/api/Payment/PaymentMethods - 500 null null 588.2624ms
2025-12-04 11:57:26.278 +02:00 [INF] Application is building..................
2025-12-04 11:57:27.339 +02:00 [INF] User profile is available. Using 'C:\Users\Mohamed\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-04 11:57:27.520 +02:00 [INF] Application is running..................
2025-12-04 11:57:27.701 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-04 11:57:27.702 +02:00 [INF] Hosting environment: Development
2025-12-04 11:57:27.702 +02:00 [INF] Content root path: C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Presentation
2025-12-04 11:57:27.787 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/swagger - null null
2025-12-04 11:57:27.855 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/swagger - 301 null null 68.4973ms
2025-12-04 11:57:27.881 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/swagger/index.html - null null
2025-12-04 11:57:27.948 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/swagger/index.html - 200 null text/html;charset=utf-8 67.6082ms
2025-12-04 11:57:28.203 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/swagger/v1/swagger.json - null null
2025-12-04 11:57:28.315 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 112.0966ms
2025-12-04 11:57:35.911 +02:00 [INF] Request starting HTTP/2 GET https://localhost:44391/api/Payment/PaymentMethods - null null
2025-12-04 11:57:36.088 +02:00 [INF] Executing endpoint 'eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods (eCommerce.Presentation)'
2025-12-04 11:57:36.121 +02:00 [INF] Route matched with {action = "GetPaymentMethods", controller = "Payment", page = "", area = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[eCommerce.Application.DTOs.Cart.GetPaymentMethod]]] GetPaymentMethods() on controller eCommerce.Presentation.Controller.PaymentController (eCommerce.Presentation).
2025-12-04 11:57:37.083 +02:00 [WRN] No store type was specified for the decimal property 'Price' on entity type 'Product'. This will cause values to be silently truncated if they do not fit in the default precision and scale. Explicitly specify the SQL server column type that can accommodate all the values in 'OnModelCreating' using 'HasColumnType', specify precision and scale using 'HasPrecision', or configure a value converter using 'HasConversion'.
2025-12-04 11:57:37.866 +02:00 [ERR] Failed executing DbCommand (62ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name]
FROM [PaymentMethods] AS [p]
2025-12-04 11:57:37.925 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'eCommerce.Infrastructure.Data.AppDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PaymentMethods'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:5cc93303-9fdc-4a35-a54e-b891add781d9
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PaymentMethods'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:5cc93303-9fdc-4a35-a54e-b891add781d9
Error Number:208,State:1,Class:16
2025-12-04 11:57:38.261 +02:00 [INF] Executed action eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods (eCommerce.Presentation) in 2137.0627ms
2025-12-04 11:57:38.265 +02:00 [INF] Executed endpoint 'eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods (eCommerce.Presentation)'
2025-12-04 11:57:38.398 +02:00 [ERR] UnKnown exception
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'PaymentMethods'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__211_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at eCommerce.Infrastructure.Repositories.Cart.PaymentMethodRepository.GetPaymentMethodAsync() in C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Infrastructure\Repositories\Cart\PaymentMethodRepository.cs:line 19
   at eCommerce.Application.Services.Implementations.Cart.PaymentMethodService.GetPaymentMethodAsync() in C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Application\Services\Implementations\Cart\PaymentMethodService.cs:line 21
   at eCommerce.Presentation.Controller.PaymentController.GetPaymentMethods() in C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Presentation\Controller\PaymentController.cs:line 22
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at eCommerce.Infrastructure.Middleware.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\Mohamed\RiderProjects\ecommerceSolution\eCommerce.Infrastructure\Middleware\ExceptionHandlingMiddleware.cs:line 25
ClientConnectionId:5cc93303-9fdc-4a35-a54e-b891add781d9
Error Number:208,State:1,Class:16
2025-12-04 11:57:38.439 +02:00 [ERR] HTTP GET /api/Payment/PaymentMethods responded 500 in 2520.7935 ms
2025-12-04 11:57:38.449 +02:00 [INF] Request finished HTTP/2 GET https://localhost:44391/api/Payment/PaymentMethods - 500 null null 2538.7257ms
